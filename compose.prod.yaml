services:
  vue:
    build:
      target: vue_prod
      args:
        - VITE_SENTRY_DSN=${SENTRY_DSN}

  docs:
    build:
      target: docs_prod

  php:
    build:
      context: ./symfony
      target: frankenphp_prod
    environment:
      APP_SECRET: ${APP_SECRET}
      SENTRY_DSN: ${SENTRY_DSN}
    volumes:
      - ./symfony/docker/caddy/Caddyfile.prod:/etc/caddy/Caddyfile
      - ./symfony/docker/caddy/worker.Caddyfile:/etc/caddy/worker.Caddyfile
    networks:
      - puc-network

networks:
  puc-network:
    name: puc_network